# NAME

`update-locale` - Update holidata.net locale data files

# SYNOPSIS
```
HOLIDATA=/path/to/holidata.py ./update-locale [--commit] (--all|LOCALE...) YEAR 
```

# DESCRIPTION
Use the `update-locale` script to update the locale data files of [holidata.net](https://holidata.net).
The script requires the location of `holidata.py`, the [holidata python module](https://github.com/GothenburgBitFactory/holidata), to injected via the `HOLIDATA` environment variable!

For each `LOCALE` `update-locale` generates the data files (formats `csv`, `json`, `yaml`, and `xml`) for the given `YEAR` and then generates the files `locale_index.txt`, `local_index.html` and `map.html` for the current data set. 

If the `--commit` option is given, the script creates a commit with the message _"Add holidays for `LOCALE` `YEAR`"_ for each updated locale containing the new and updated files.

# OPTIONS
* **`LOCALE`**  
  The locale(s) the data files should be generated for.
  You can specify several locales or use the `--all` option to update all available locales.
* **`YEAR`**  
  The year for which data files should be generated for each locale.
  Only a single year can be specified!
* **`--all`**  
  Try to update all locales found on holidata.net.
  **Note that currently not all locales are supported by `holidata.py`!
  Missing locales are skipped.**
* **`--commit`**  
  Create a git commit for each updated locale.
  **Note that this option also does a cleanup of the holidata.net repository on startup:
  All untracked files are removed and all changes in working directory are discarded!**
  
# EXAMPLES
1. Update all locales and create commits for each update
   ```
   HOLIDATA=/path/to/holidata.py ./update-locale --commit --all 2023
   ```
1. Update a single locale
   ```
   HOLIDATA=/path/to/holidata.py ./update-locale en-US 2023
   ```
1. Update multiple locales
   ```
   HOLIDATA=/path/to/holidata.py ./update-locale en-US de-DE 2023
   ```
1. You can specify the arguments `YEAR` and `LOCALE` in any order.
   Those three lines are thus equivalent:
   ```
   HOLIDATA=/path/to/holidata.py ./update-locale en-US de-DE 2023
   HOLIDATA=/path/to/holidata.py ./update-locale en-US 2023 de-DE
   HOLIDATA=/path/to/holidata.py ./update-locale 2023 de-DE en-US
   ```


